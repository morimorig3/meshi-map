# めしマップ - アイデアメモ

## コンセプト

食べたいもの・食べたものをまとめられるアプリ。
**MAP機能が目玉**で、食べた場所が地図上に座標として記録される。

### 解決したい課題

現在地を取得して...
- 「お腹空いたなぁ」→「あ、ここ美味しかったしまた行こう」
- 「あ、ここ行きたかった場所近いじゃん、行ってみよう」

を促すためのアプリ。

## 主要機能（MVP）

### 店舗検索・登録
- アプリを起動
- 店名で検索（フリーワード）
- ヒットした店舗を登録

### 地図表示
- 地図画面を開く
- 登録済み店舗が座標（点）で表示される
- タップするとお店の情報が表示される
  - 店舗名
  - URL
  - 食べ物の画像

### スコープ外
- ナビゲーション機能は不要

## 将来的な機能拡張

- 都道府県でフィルタリング
- 食べ物の種類でフィルタリング
- タグ付け
- メモ・レビュー機能
- 画像アップロード
- ユーザー認証（複数デバイス同期）

## 既存サービスとの差別化

食べログ、Googleマップとの違い:
- **「自分だけの記録」** という個人的な体験
- シンプルで余計な情報がない
- 自分の食体験に特化

## 技術選定

### 決定事項

| カテゴリ | 選定 | 理由 |
|---------|------|------|
| 店舗検索API | Google Places API | 日本のデータが豊富、無料枠あり |
| データベース | Supabase | 無料枠あり、PostgreSQL、認証機能 |
| フロントエンド | Next.js | React、Cloudflare Pagesと相性良い |
| バックエンド | Hono | 軽量、Cloudflare Workersと相性良い |
| ホスティング | Cloudflare Pages/Workers | 無料枠が太っ腹、クレカ不要 |
| 地図ライブラリ | Leaflet (React Leaflet) | 無料、オープンソース |

### アーキテクチャ

```
モノレポ構成
├── apps/
│   ├── web/          # Next.js (Cloudflare Pages)
│   └── api/          # Hono (Cloudflare Workers)
├── packages/
│   ├── shared/       # 共通の型定義
│   └── database/     # Supabaseクライアント
└── package.json      # npm workspaces
```

### セキュリティ方針

- Google Places APIキーはバックエンドで管理（フロントエンド露出禁止）
- フロントエンドからDBを直接呼び出さない
- バックエンドAPI経由でデータアクセス

### コスト方針

- 無料枠内で運用
- 無料枠が無くなったらサービス停止（予期せぬ課金を避ける）
- クレジットカード登録なしで開始

## 検討した代替案

### ホスティング
- ~~Vercel~~ → 10秒のサーバーレス関数制限
- **Cloudflare** → 採用（無料枠が太っ腹）

### データソース
- ~~OpenStreetMap (Overpass API)~~ → 日本の情報が少ない
- **Google Places API** → 採用

### DB直接アクセス vs バックエンドAPI
- ~~Supabase直接アクセス~~ → RLSの設定ミスリスク、APIキー露出
- **バックエンドAPI経由** → 採用（セキュリティ優先）

## プラットフォーム展開

1. **MVP**: Webアプリ（PWA）
2. **将来**: iOS/Androidアプリ（React Native等）

モノレポ + API分離構成なので、モバイルアプリからも同じAPIを利用可能。
